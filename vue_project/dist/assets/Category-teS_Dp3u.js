/* empty css             *//* empty css                *//* empty css                  *//* empty css                     *//* empty css                *//* empty css               *//* empty css            *//* empty css               *//* empty css              */import{b as S,e as h,c as D,a as m,f as o,u as B,N as z,h as U,w as a,k as q,Q as I,P as J,m as u,o as O,l as p,S as T,E as $,g as F,U as M,p as d}from"./index-0MHbT1SH.js";const P={class:"card",style:{"margin-bottom":"5px"}},R={class:"card",style:{"margin-bottom":"5px"}},A={class:"card",style:{"margin-bottom":"5px"}},Q={class:"dialog-footer",style:{padding:"0 0 0 0"}},le={__name:"Category",setup(j){const f=S(),e=h({user:JSON.parse(localStorage.getItem("code_user")||"{}"),title:null,pageNum:1,pageSize:5,total:0,tableData:[],form:{},formVisible:!1,rules:{title:[{required:!0,message:"请输入分类标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}),i=()=>{u.get("/category/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,title:e.title}}).then(l=>{var t,s;l.code==="200"?(e.tableData=(t=l.data)==null?void 0:t.list,e.total=(s=l.data)==null?void 0:s.total):Element.error(l.msg)})};i();const g=()=>{e.form={},e.formVisible=!0},_=()=>{u.post("/category/add",e.form).then(l=>{l.code==="200"?(d.success("新增成功"),e.formVisible=!1,i()):(d.error(l.msg),e.formVisible=!1)})},b=()=>{u.put("/category/update",e.form).then(l=>{l.code==="200"?(d.success("更新成功"),e.formVisible=!1,i()):d.error(l.msg)})},y=()=>{f.value.validate(l=>{l&&(e.form.id?b():_())})},V=l=>{e.form=JSON.parse(JSON.stringify(l)),e.formVisible=!0},x=l=>{M.confirm("您确认要删除数据吗，删除后无法恢复","删除确认",{type:"warning"}).then(t=>{u.delete("/category/delete/"+l).then(s=>{s.code==="200"?(d.success("删除成功"),console.log("删除成功"),i()):d.error(s.msg)})}).catch(t=>{})},k=()=>{e.title=null,i()};return(l,t)=>{const s=U,n=q,c=T,C=I,E=F,v=$,w=J;return O(),D("div",null,[m("div",P,[o(s,{clearable:"",onClear:i,style:{width:"240px"},modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=r=>e.title=r),placeholder:"请输入title查询","prefix-icon":B(z)},null,8,["modelValue","prefix-icon"]),o(n,{type:"primary",onClick:i},{default:a(()=>t[4]||(t[4]=[p("查 询")])),_:1}),o(n,{onClick:k},{default:a(()=>t[5]||(t[5]=[p("重 置")])),_:1})]),m("div",R,[o(n,{type:"primary",onClick:g},{default:a(()=>t[6]||(t[6]=[p("新增")])),_:1})]),m("div",A,[o(C,{data:e.tableData,style:{width:"100%"},"header-cell-style":{color:"#333",fontSize:"17px",backgroundColor:"#eaf4ff"}},{default:a(()=>[o(c,{prop:"title",label:"分类标题"}),o(c,{label:"操作",width:"100"},{default:a(r=>[o(n,{circle:"",icon:"Edit",type:"primary",onClick:N=>V(r.row)},null,8,["onClick"]),o(n,{circle:"",icon:"Delete",type:"danger",onClick:N=>x(r.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),m("div",null,[o(w,{modelValue:e.formVisible,"onUpdate:modelValue":t[3]||(t[3]=r=>e.formVisible=r),title:"分类信息",width:"500","destroy-on-close":""},{footer:a(()=>[m("div",Q,[o(n,{onClick:t[2]||(t[2]=r=>e.formVisible=!1)},{default:a(()=>t[7]||(t[7]=[p("取消")])),_:1}),o(n,{type:"primary",onClick:y},{default:a(()=>t[8]||(t[8]=[p("确认")])),_:1})])]),default:a(()=>[o(v,{ref_key:"formRef",ref:f,rules:e.rules,"label-width":"80px",style:{padding:"20px 30px 0 0"},model:e.form},{default:a(()=>[o(E,{label:"分类标题",prop:"title"},{default:a(()=>[o(s,{placeholder:"请输入分类标题",modelValue:e.form.title,"onUpdate:modelValue":t[1]||(t[1]=r=>e.form.title=r),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])])}}};export{le as default};
