/* empty css             *//* empty css                *//* empty css                  *//* empty css            *//* empty css               *//* empty css               *//* empty css                 *//* empty css                     *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{b as L,e as A,W as H,X as P,c as v,a as m,f as o,u as b,N as R,h as j,w as r,k as q,Q,P as W,m as c,p as i,o as g,l as d,S as X,B as C,s as G,T as K,E as Y,g as Z,O as ee,i as te,F as oe,r as le,j as ae,U as re}from"./index-0MHbT1SH.js";import{T as ne,E as ie}from"./index.esm-ChNdF61u.js";const se={class:"card",style:{"margin-bottom":"5px"}},de={class:"card",style:{"margin-bottom":"5px"}},pe={class:"card",style:{"margin-bottom":"5px"}},me={style:{border:"1px solid #ccc",width:"100%"}},ue={class:"dialog-footer",style:{padding:"0 0 0 0"}},ce=["innerHTML"],x="default",Te={__name:"Introduction",setup(fe){L();const e=A({user:JSON.parse(localStorage.getItem("code_user")||"{}"),form:{},formVisible:!1,pageNum:1,pageSize:5,pageTotal:6,tableData:[],title:null,content:null,viewVisible:!1,categoryData:[]}),_=H(),y={MENU_CONF:{}};y.MENU_CONF.uploadImage={headers:{token:e.user.token},server:"http://43.143.94.185:9999/files/wang/upload",fieldName:"file"},P(()=>{const l=_.value;l!=null&&l.destroy()});const k=l=>{_.value=l},p=()=>{c.get("/introduction/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,title:e.title}}).then(l=>{l.code==="200"?(e.tableData=l.data.list,e.title=l.data.title):i.error("系统异常")})};p();const E=()=>{e.form=null},h=()=>{e.formVisible=!0,e.form={}},N=()=>{c.post("/introduction/add",e.form).then(l=>{l.code==="200"?(i.success("新增数据成功"),e.formVisible=!1,p()):i.error(l.msg)})},S=()=>{c.put("introduction/update",e.form).then(l=>{l.code==="200"?(i.success("修改成功"),p()):i.error(l.msg)})},U=l=>{e.form=JSON.parse(JSON.stringify(l)),e.formVisible=!0},T=()=>{e.form.id?S():N(),e.formVisible=!1},D=l=>{e.form.img=l.data},B=l=>{re.confirm("您确认要删除数据吗，删除后无法恢复","删除确认",{type:"warning"}).then(t=>{c.delete("/introduction/delete/"+l).then(u=>{u.code==="200"?(i.success("删除成功"),console.log("删除成功"),p()):i.error(u.msg)})}).catch(t=>{})},I=l=>{e.content=l,e.viewVisible=!0};return(()=>{c.get("/category/selectAll").then(l=>{l.code==="200"?e.categoryData=l.data:i.error(l.msg)})})(),(l,t)=>{const u=j,n=q,O=K,s=X,F=Q,M=ee,f=Z,z=ae,$=te,J=Y,V=W;return g(),v("div",null,[m("div",se,[o(u,{clearable:"",onClear:p,style:{width:"240px"},modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.title=a),placeholder:"请输入title查询","prefix-icon":b(R)},null,8,["modelValue","prefix-icon"]),o(n,{type:"primary",onClick:p},{default:r(()=>t[7]||(t[7]=[d("查 询")])),_:1}),o(n,{onClick:E},{default:r(()=>t[8]||(t[8]=[d("重 置")])),_:1})]),m("div",de,[o(n,{type:"primary",onClick:h},{default:r(()=>t[9]||(t[9]=[d("新增")])),_:1})]),m("div",pe,[o(F,{data:e.tableData,style:{width:"100%"},"header-cell-style":{color:"#333",fontSize:"17px",backgroundColor:"#eaf4ff"}},{default:r(()=>[o(s,{label:"图片",width:"100px"},{default:r(a=>[a.row.img?(g(),C(O,{key:0,src:a.row.img,"preview-src-list":[a.row.img],"preview-teleported":!0,style:{width:"60px",height:"50px","border-radius":"5px",display:"block"}},null,8,["src","preview-src-list"])):G("",!0)]),_:1}),o(s,{prop:"title",label:"攻略标题"}),o(s,{prop:"categoryTitle",label:"攻略分类"}),o(s,{prop:"userName",label:"发布作者"}),o(s,{prop:"content",label:"攻略内容"},{default:r(a=>[o(n,{onClick:w=>I(a.row.content)},{default:r(()=>t[10]||(t[10]=[d("点击查看")])),_:2},1032,["onClick"])]),_:1}),o(s,{prop:"time",label:"发布时间"}),o(s,{label:"操作",width:"100"},{default:r(a=>[o(n,{circle:"",icon:"Edit",type:"primary",onClick:w=>U(a.row)},null,8,["onClick"]),o(n,{circle:"",icon:"Delete",type:"danger",onClick:w=>B(a.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),o(V,{modelValue:e.formVisible,"onUpdate:modelValue":t[5]||(t[5]=a=>e.formVisible=a),title:"攻略信息",width:"60%","destroy-on-close":"",top:"20px"},{footer:r(()=>[m("div",ue,[o(n,{onClick:t[4]||(t[4]=a=>e.formVisible=!1)},{default:r(()=>t[12]||(t[12]=[d("取消")])),_:1}),o(n,{type:"primary",onClick:T},{default:r(()=>t[13]||(t[13]=[d("确认")])),_:1})])]),default:r(()=>[o(J,{"label-width":"80px",style:{padding:"20px 30px 0 0"},model:e.form},{default:r(()=>[o(f,{prop:"avatar",label:"攻略图片"},{default:r(()=>[o(M,{action:"http://43.143.94.185:9999/files/upload",headers:{token:e.user.token},"on-success":D,"list-type":"picture"},{default:r(()=>[o(n,{type:"primary"},{default:r(()=>t[11]||(t[11]=[d("上传头像")])),_:1})]),_:1},8,["headers"])]),_:1}),o(f,{label:"攻略标题",prop:"title"},{default:r(()=>[o(u,{placeholder:"请输入攻略标题",modelValue:e.form.title,"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.title=a),autocomplete:"off",style:{width:"30%"}},null,8,["modelValue"])]),_:1}),o(f,{label:"攻略标题",prop:"title"},{default:r(()=>[o($,{modelValue:e.form.categoryId,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.categoryId=a),placeholder:"请选择攻略分类",style:{width:"30%"}},{default:r(()=>[(g(!0),v(oe,null,le(e.categoryData,a=>(g(),C(z,{key:a.id,label:a.title,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"攻略内容",prop:"content"},{default:r(()=>[m("div",me,[o(b(ne),{style:{"border-bottom":"1px solid #ccc"},editor:_.value,mode:x},null,8,["editor"]),o(b(ie),{style:{height:"350px",overflow:"hidden"},modelValue:e.form.content,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.content=a),mode:x,defaultConfig:y,onOnCreated:k},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(V,{modelValue:e.viewVisible,"onUpdate:modelValue":t[6]||(t[6]=a=>e.viewVisible=a),title:"攻略信息",width:"60%","destroy-on-close":""},{default:r(()=>[m("div",{ref:"dialogContent",innerHTML:e.content,style:{padding:"0 20px"}},null,8,ce)]),_:1},8,["modelValue"])])}}};export{Te as default};
