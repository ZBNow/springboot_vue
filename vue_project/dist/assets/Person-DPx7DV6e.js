/* empty css             *//* empty css              *//* empty css                 *//* empty css               */import{r as x}from"./request-B6N1oStH.js";import{b as y,c as g,a as d,d as l,w as o,E,i as b,o as U,e as k,f as v,K as N,j as m,k as S}from"./index-Dz5qcgSE.js";const I={class:"card",style:{width:"50%"}},w={style:{"text-align":"center"}},j={__name:"Person",emits:["updateUser"],setup(B,{emit:p}){const e=y({user:JSON.parse(localStorage.getItem("code_user")||"{}")}),i=s=>{e.user.avatar=s.data},f=p,c=()=>{let s;e.user.role==="ADMIN"&&(s="/admin/update"),e.user.role==="USER"&&(s="/user/update"),x.put(s,e.user).then(t=>{t.code==="200"&&(S.success("信息修改成功"),console.log(e.user),localStorage.setItem("code_user",JSON.stringify(e.user)),f("updateUser"))})};return(s,t)=>{const r=v,u=k,n=b,_=N,V=E;return U(),g("div",I,[d("div",null,[l(V,{"label-width":"80px",style:{padding:"20px 30px 0 0"},model:e.user},{default:o(()=>[l(u,{label:"账号"},{default:o(()=>[l(r,{modelValue:e.user.username,"onUpdate:modelValue":t[0]||(t[0]=a=>e.user.username=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(u,{label:"名称"},{default:o(()=>[l(r,{modelValue:e.user.name,"onUpdate:modelValue":t[1]||(t[1]=a=>e.user.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(u,{label:"电话"},{default:o(()=>[l(r,{modelValue:e.user.phone,"onUpdate:modelValue":t[2]||(t[2]=a=>e.user.phone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(u,{label:"邮箱"},{default:o(()=>[l(r,{modelValue:e.user.email,"onUpdate:modelValue":t[3]||(t[3]=a=>e.user.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(u,{prop:"avatar",label:"头像"},{default:o(()=>[l(_,{action:"http://localhost:9999/files/upload",headers:{token:e.user.token},"on-success":i,"list-type":"picture"},{default:o(()=>[l(n,{type:"primary"},{default:o(()=>t[4]||(t[4]=[m("上传头像")])),_:1})]),_:1},8,["headers"])]),_:1})]),_:1},8,["model"])]),d("div",w,[l(n,{type:"primary",style:{padding:"18px 35px"},onClick:c},{default:o(()=>t[5]||(t[5]=[m("保存")])),_:1})])])}}};export{j as default};
